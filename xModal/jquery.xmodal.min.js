(function(a){a.fn.xModal=function(k){var h=a('<div class="modal-wrapper"><div><div></div></div></div>'),b=h,c=h.find(">*"),g=h.find(">*>*");var e=a.extend({width:"75%",headline:"",description:"",href:""},k);function f(){var l=function(m){if(m){console.log("event:",m)}else{console.log("this didn't come from an event!")}a(h).removeClass("puffIn").addClass("puffOut");setTimeout(function(){a(h).removeClass("active").removeClass("puffOut");g.empty();a(h).remove()},500);a(document).off("keyup.xModalEscape")};a(document).on("keyup.xModalEscape",function(m){console.log("e.which:",m.which);if(m.which=="27"){console.log("you hit escape");l(m)}});a(document).off("click.xModalClose",".closeModal").on("click.xModalClose",".closeModal",function(){console.log("you clicked the close icon");l()})}function j(l,m){a.ajax({url:l,success:function(n){console.log("success");m(n)},error:function(n){console.log("error");m(a("<div>ERROR</div>"))}})}if(!this.selector){console.log("this is not a selector.");var d=a("<div/>");if(e.href){console.log("you gotta path!",e.href);j(e.href,function(l){a(l).prependTo(g)})}if(e.headline){a("<h1>"+e.headline+"</h1>").appendTo(d)}if(e.description){a("<p>"+e.description+"</p>").appendTo(d)}d.prependTo(g);h.appendTo("body");var i=g.height();c.find(".closeModal").remove();a('<a class="closeModal icon-close"></a>').prependTo(c);c.width(e.width);c.height(i);c.css({"margin-top":-(i/2)+"px"});a(h).addClass("active").addClass("puffIn");f();return}this.off("click.xModal").on("click.xModal",function(o){o.preventDefault();var n=a(this),m=n.attr("href");if(!m.indexOf("#")){console.log("contains a #");var p=a(m);p.clone().appendTo(g);if(m.length==1){if(e.headline){a("<h1>"+e.headline+"</h1>").appendTo(g)}if(e.description){a("<p>"+e.description+"</p>").appendTo(g)}}}else{j(m,function(q){a(q).prependTo(g)})}h.appendTo("body");var l=g.height();c.find(".closeModal").remove();a('<a class="closeModal icon-close"></a>').prependTo(c);c.width(e.width);c.height(l);c.css({"margin-top":-(l/2)+"px"});a(h).addClass("active").addClass("puffIn");f()});return this}}(jQuery));